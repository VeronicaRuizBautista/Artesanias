import { useEffect, useState } from 'react';
//import "react-datepicker/dist/react-datepicker.css";
import { Form, useLoaderData, useNavigate } from 'react-router-dom';
import { Input } from '../components/Inputs';
import { Muesca } from '../components/Muesca';

export default function EmailRecord() {

    const [day, setDay] = useState('');
    const [month, setMonth] = useState('');
    const [year, setYear] = useState('');
    const [errorMessage, setErrorMessage] = useState(null)

    const handleDayChange = (e) => setDay(e.target.value);
    const handleMonthChange = (e) => setMonth(e.target.value);
    const handleYearChange = (e) => setYear(e.target.value);

    const navigate = useNavigate();
    const data = useLoaderData()


    useEffect(() => {
        if (data) navigate('/')
    }, [])

    const handleSubmit = (e) => {
        e.preventDefault();
        //const fecha = `${formData.year}/${formData.month}/${formData.day}`;
        const formData = new FormData(e.target)
        formData.append('birth_day', `${formData.get('year')}-${formData.get('month')}-${formData.get('day')}`)
        delete formData.delete('day')
        delete formData.delete('month')
        delete formData.delete('year')

        
        if (formData.get('email') !== formData.get('authEmail')) return setErrorMessage('El correo electronico y su confirmación deben ser iguales.');
        delete formData.delete('authEmail')
        if (formData.get('password') !== formData.get('authPassword')) return setErrorMessage('La contraseña y la confirmación deben ser iguales.');
        delete formData.delete('authPassword')
                
        navigate('/register/TermsAndConditions', {
            state: {
                nick: formData.get('nick'), 
                email: formData.get('email'), 
                birth_day: formData.get('birth_day'), 
                sex: formData.get('sex'),
                password: formData.get('password')
            },
        }); 
    };

    return (

        <>
            <Muesca />
            <main className='pl-[65px] pr-[45px] py-10 w-[100dvw] h-[100dvh]'>
                <Form onSubmit={handleSubmit} className='flex flex-col text-lg gap-[25px]'>
                    <Input desc='*Crea un nombre de usuario de mínimo 5 y máximo de 12 carácteres' title='Nombre de usuario*' min='5' max='12' name='nick' />
                    <Input title='Correo electrónico*' name='email' type='email' pattern=".+@gmail\.com" />
                    <Input title='Confirma tu correo*' name='authEmail' type='email' pattern=".+@gmail\.com" />
                    <Input title='Contraseña*' desc='Recuerda crear una contraseña dificil de adivinar' type='password' name='password' />
                    <Input title='Confirma tu contraseña*' type='password' name='authPassword' />
                    <div className='flex flex-col gap-[10px]' >

                        <label htmlFor="authPassword"><big><strong>Sexo</strong></big></label>
                        <select className='w-[65%] text-yellow-500 rounded-md p-2 outline-none bg-703A31' name="sex" id="sex">
                            <option value="Masculino">Masculino</option>
                            <option value="Femenino">Femenino</option>
                        </select>
                    </div>
                    <div className='flex flex-col gap-[10px]' >

                        <label htmlFor="day"><big><strong>Fecha de nacimiento</strong></big></label>
                        <div className='flex gap-[20px]'>
                            <select required name='day' id='day' value={day} onChange={handleDayChange} className='rounded-md min-w-max py-1 px-1 outline-none bg-703A31 text-FFA800'>
                                <option value="" disabled selected>DD</option>
                                {Array.from({ length: 31 }, (_, i) => (
                                    <option key={i} value={i + 1}>{i + 1}</option>
                                ))}
                            </select>

                            <select required name='month' value={month} onChange={handleMonthChange} className='rounded-md min-w-max py-1 px-1 outline-none bg-703A31 text-FFA800'>
                                <option value="" disabled selected>MM</option>
                                {Array.from({ length: 12 }, (_, i) => (
                                    <option key={i} value={i + 1}>{i + 1}</option>
                                ))}
                            </select>

                            <select required name='year' value={year} onChange={handleYearChange} className='rounded-md min-w-max py-1 px-1 outline-none bg-703A31 text-FFA800'>
                                <option disabled selected value="">YYYY</option>
                                {Array.from({ length: 40 }, (_, i) => (
                                    <option key={i} value={2024 - i}>{2024 - i}</option>
                                ))}
                            </select>
                        </div>
                    </div>
                    {
                        errorMessage && <p className='text-red-500 text-[13px] tracking-tighter'>{errorMessage}</p>
                    }
                    <button className='flex gap-[10px] self-end underline  items-center text-9D1A1A' type='submit'>
                        <svg width="15" height="15" viewBox="0 0 27 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.64563 1.79232L20.8184 17.9651C22.771 19.9177 22.7711 23.0836 20.8184 25.0362L4.64563 41.209" stroke="#FFA800" strokeWidth="8" strokeLinecap="round" strokeLinejoin="round" />
                        </svg>

                        Continuar
                    </button>
                </Form>

                <div className='absolute z-[-10] right-[0] bottom-0 flex items-end '>
                    <svg width="240" height="500" viewBox="0 0 717 1424" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g opacity="0.15">
                            <path d="M711.573 30.2787L29.3197 712.35L711.573 1394.42L1393.83 712.35L711.573 30.2787Z"
                                fill="#FFB800" />
                            <path
                                d="M712.917 1425.45L690.768 1404.69L705.995 1389.47L697.689 1379.78L703.226 1374.24L712.917 1382.55L721.222 1374.24L726.76 1379.78L718.454 1389.47L733.681 1404.69L712.917 1425.45Z"
                                fill="#9D1A1A" />
                            <path
                                d="M678.309 1390.86L665.85 1378.4L696.305 1347.96L708.763 1360.41L678.309 1390.86ZM653.391 1365.95L640.932 1353.49L671.387 1323.04L683.846 1335.5L653.391 1365.95ZM628.474 1341.04L616.015 1328.58L646.469 1298.13L658.928 1310.59L628.474 1341.04ZM602.172 1316.12L589.713 1303.67L620.168 1273.22L632.626 1285.68L602.172 1316.12ZM577.254 1289.83L564.796 1277.37L595.25 1246.93L607.709 1259.38L577.254 1289.83ZM552.337 1264.92L539.878 1252.46L570.333 1222.02L582.791 1234.47L552.337 1264.92ZM527.419 1240.01L514.961 1227.55L545.415 1197.11L557.874 1209.56L527.419 1240.01ZM501.117 1215.1L488.659 1202.64L519.114 1172.2L531.572 1184.65L501.117 1215.1ZM476.2 1188.8L463.742 1176.35L494.196 1145.9L506.655 1158.36L476.2 1188.8ZM451.282 1163.89L438.824 1151.44L469.279 1120.99L481.737 1133.45L451.282 1163.89ZM424.981 1138.98L412.522 1126.53L442.977 1096.08L455.436 1108.53L424.981 1138.98ZM400.063 1112.69L387.605 1100.23L418.059 1069.78L430.518 1082.24L400.063 1112.69ZM375.146 1087.78L362.687 1075.32L393.142 1044.87L405.601 1057.33L375.146 1087.78ZM350.228 1062.86L337.77 1050.41L368.224 1019.96L380.683 1032.42L350.228 1062.86ZM323.927 1037.95L311.468 1025.5L341.922 995.052L354.381 1007.51L323.927 1037.95ZM299.009 1011.66L286.55 999.203L317.005 968.756L329.464 981.212L299.009 1011.66ZM274.092 986.748L261.633 974.293L292.087 943.846L304.547 956.302L274.092 986.748ZM249.174 961.837L236.715 949.382L267.17 918.935L279.629 931.391L249.174 961.837ZM222.872 936.926L210.414 924.471L240.868 894.024L253.327 906.479L222.872 936.926ZM197.955 910.632L185.496 898.176L215.951 867.729L228.41 880.185L197.955 910.632ZM173.038 885.72L160.579 873.265L191.033 842.819L203.492 855.274L173.038 885.72ZM146.735 860.81L134.277 848.355L164.732 817.908L177.19 830.363L146.735 860.81ZM121.818 835.899L109.36 823.443L139.814 792.997L152.273 805.452L121.818 835.899ZM96.9009 809.604L84.4418 797.149L114.897 766.702L127.355 779.158L96.9009 809.604ZM71.9831 784.693L59.5245 772.238L89.9793 741.792L102.438 754.246L71.9831 784.693ZM45.6814 759.783L33.2228 747.327L63.6772 716.881L76.1363 729.336L45.6814 759.783Z"
                                fill="#9D1A1A" />
                            <path
                                d="M20.7646 733.487L0 712.728L20.7646 691.969L35.9916 707.193L44.2975 697.505L51.219 704.425L41.5291 712.728L51.219 721.032L44.2975 727.952L35.9916 719.647L20.7646 733.487Z"
                                fill="#9D1A1A" />
                            <path
                                d="M63.6773 708.578L33.2229 678.132L45.6816 665.677L76.1364 696.123L63.6773 708.578ZM88.5951 683.668L58.1402 653.221L70.5989 640.766L101.054 671.212L88.5951 683.668ZM113.512 658.757L83.0579 628.31L95.5166 615.854L125.971 646.301L113.512 658.757ZM139.814 632.462L109.36 602.015L121.818 589.56L152.273 620.007L139.814 632.462ZM164.732 607.551L134.277 577.104L146.736 564.65L177.19 595.095L164.732 607.551ZM189.649 582.641L159.195 552.194L171.653 539.738L202.108 570.185L189.649 582.641ZM215.951 557.73L185.496 527.283L197.955 514.827L228.41 545.274L215.951 557.73ZM240.869 531.435L210.414 500.988L222.872 488.533L253.327 518.979L240.869 531.435ZM265.786 506.524L235.331 476.077L247.79 463.622L278.245 494.068L265.786 506.524ZM290.704 481.613L260.249 451.167L272.707 438.711L303.162 469.158L290.704 481.613ZM317.005 456.702L286.55 426.256L299.009 413.8L329.464 444.247L317.005 456.702ZM341.923 430.408L311.468 399.961L323.927 387.505L354.381 417.952L341.923 430.408ZM366.84 405.497L336.385 375.05L348.844 362.594L379.299 393.041L366.84 405.497ZM391.758 380.585L361.303 350.14L373.762 337.684L404.216 368.131L391.758 380.585ZM418.059 355.675L387.605 325.228L400.064 312.773L430.518 343.22L418.059 355.675ZM442.977 329.38L412.522 298.934L424.981 286.478L455.436 316.925L442.977 329.38ZM467.894 304.469L437.44 274.023L449.899 261.567L480.353 292.014L467.894 304.469ZM492.812 279.558L462.357 249.112L474.816 236.657L505.271 267.103L492.812 279.558ZM519.114 253.264L488.659 222.817L501.118 210.362L531.573 240.808L519.114 253.264ZM544.031 228.353L513.576 197.907L526.035 185.451L556.49 215.898L544.031 228.353ZM568.948 203.442L538.494 172.995L550.953 160.54L581.408 190.987L568.948 203.442ZM595.251 178.531L564.796 148.084L577.254 135.63L607.709 166.075L595.251 178.531ZM620.168 152.236L589.713 121.79L602.172 109.334L632.627 139.781L620.168 152.236ZM645.085 127.325L614.631 96.8787L627.089 84.4237L657.544 114.87L645.085 127.325ZM670.003 102.415L639.548 71.968L652.007 59.5131L682.462 89.959L670.003 102.415ZM696.305 77.5041L665.85 47.0573L678.309 34.6016L708.763 65.0483L696.305 77.5041Z"
                                fill="#9D1A1A" />
                            <path
                                d="M721.222 51.2058L712.917 42.9025L703.226 51.2058L697.689 45.6706L705.995 35.9828L690.768 22.1435L712.917 0L733.681 22.1435L718.454 35.9828L726.76 45.6706L721.222 51.2058Z"
                                fill="#9D1A1A" />
                            <path
                                d="M746.14 1390.86L715.685 1360.41L728.144 1347.96L758.599 1378.4L746.14 1390.86ZM771.057 1365.95L740.603 1335.5L753.061 1323.04L783.516 1353.49L771.057 1365.95ZM797.359 1341.04L766.904 1310.59L779.363 1298.13L809.818 1328.58L797.359 1341.04ZM822.277 1316.12L791.822 1285.68L804.28 1273.22L834.735 1303.67L822.277 1316.12ZM847.194 1289.83L816.74 1259.38L829.198 1246.93L859.653 1277.37L847.194 1289.83ZM872.112 1264.92L841.657 1234.47L854.116 1222.02L884.57 1252.46L872.112 1264.92ZM898.413 1240.01L867.959 1209.56L880.417 1197.11L910.872 1227.55L898.413 1240.01ZM923.331 1215.1L892.876 1184.65L905.335 1172.2L935.789 1202.64L923.331 1215.1ZM948.248 1188.8L917.794 1158.36L930.252 1145.9L960.707 1176.35L948.248 1188.8ZM973.166 1163.89L942.711 1133.45L955.17 1120.99L985.624 1151.44L973.166 1163.89ZM999.467 1138.98L969.013 1108.53L981.472 1096.08L1011.93 1126.53L999.467 1138.98ZM1024.39 1112.69L993.93 1082.24L1006.39 1069.78L1036.84 1100.23L1024.39 1112.69ZM1049.3 1087.78L1018.85 1057.33L1031.31 1044.87L1061.76 1075.32L1049.3 1087.78ZM1075.6 1062.86L1045.15 1032.42L1057.61 1019.96L1088.06 1050.41L1075.6 1062.86ZM1100.52 1037.95L1070.07 1007.51L1082.53 995.052L1112.98 1025.5L1100.52 1037.95ZM1125.44 1011.66L1094.98 981.212L1107.44 968.756L1137.9 999.203L1125.44 1011.66ZM1150.36 986.748L1119.9 956.302L1132.36 943.846L1162.82 974.293L1150.36 986.748ZM1176.66 961.837L1146.2 931.391L1158.66 918.935L1189.12 949.382L1176.66 961.837ZM1201.58 936.926L1171.12 906.479L1183.58 894.024L1214.03 924.471L1201.58 936.926ZM1226.49 910.632L1196.04 880.185L1208.5 867.729L1238.95 898.176L1226.49 910.632ZM1251.41 885.72L1220.96 855.274L1233.41 842.819L1263.87 873.265L1251.41 885.72ZM1277.71 860.81L1247.26 830.363L1259.72 817.908L1290.17 848.355L1277.71 860.81ZM1302.63 835.899L1272.18 805.452L1284.63 792.997L1315.09 823.443L1302.63 835.899ZM1327.55 809.604L1297.09 779.158L1309.55 766.702L1340.01 797.149L1327.55 809.604ZM1353.85 784.693L1323.39 754.246L1335.85 741.792L1366.31 772.238L1353.85 784.693ZM1378.77 759.783L1348.31 729.336L1360.77 716.881L1391.23 747.327L1378.77 759.783Z"
                                fill="#9D1A1A" />
                            <path
                                d="M712.916 1231.7L689.383 1208.18L705.995 1191.57L696.305 1181.88L703.226 1176.35L712.916 1184.65L721.222 1176.35L728.143 1181.88L719.838 1191.57L735.065 1208.18L712.916 1231.7Z"
                                fill="#9D1A1A" />
                            <path
                                d="M675.54 1194.34L661.697 1180.5L694.92 1147.28L708.763 1161.12L675.54 1194.34ZM649.238 1168.04L635.395 1154.2L668.618 1120.99L682.461 1134.83L649.238 1168.04ZM621.552 1140.36L607.709 1126.52L640.932 1093.31L654.775 1107.15L621.552 1140.36ZM595.25 1114.07L581.407 1100.23L614.631 1067.01L628.474 1080.85L595.25 1114.07ZM567.564 1086.39L553.721 1072.55L586.945 1039.34L600.788 1053.17L567.564 1086.39ZM541.262 1060.09L527.419 1046.26L560.643 1013.04L574.486 1026.88L541.262 1060.09ZM513.576 1032.42L499.733 1018.58L532.957 985.362L546.8 999.201L513.576 1032.42ZM487.274 1006.12L473.431 992.281L506.655 959.067L520.498 972.907L487.274 1006.12ZM459.588 978.442L445.745 964.603L478.969 931.389L492.812 945.228L459.588 978.442ZM433.287 952.148L419.444 938.308L452.667 905.093L466.51 918.933L433.287 952.148ZM405.601 924.469L391.757 910.63L424.981 877.415L438.824 891.254L405.601 924.469ZM379.299 898.174L365.456 884.334L398.679 851.12L412.522 864.959L379.299 898.174ZM351.613 870.495L337.77 856.656L370.993 823.441L384.836 837.28L351.613 870.495ZM325.311 844.2L311.468 830.361L344.691 797.147L358.534 810.986L325.311 844.2ZM297.625 816.521L283.782 802.682L317.005 769.468L330.848 783.307L297.625 816.521ZM271.323 790.227L257.48 776.388L290.703 743.173L304.546 757.012L271.323 790.227ZM243.637 762.548L229.794 748.709L263.017 715.494L276.86 729.333L243.637 762.548Z"
                                fill="#9D1A1A" />
                            <path
                                d="M217.335 736.256L193.802 712.729L217.335 689.203L232.563 705.81L242.253 696.123L249.175 703.042L239.484 712.729L249.175 722.417L242.253 729.337L232.563 719.649L217.335 736.256Z"
                                fill="#9D1A1A" />
                            <path
                                d="M263.017 708.574L229.794 675.36L243.637 661.521L276.86 694.734L263.017 708.574ZM289.319 682.28L256.096 649.065L269.939 635.225L303.162 668.44L289.319 682.28ZM317.005 654.601L283.782 621.386L297.625 607.547L330.848 640.761L317.005 654.601ZM343.307 628.306L310.084 595.091L323.927 581.252L357.15 614.466L343.307 628.306ZM370.993 600.627L337.77 567.412L351.613 553.573L384.836 586.788L370.993 600.627ZM397.295 574.332L364.071 541.118L377.914 527.279L411.138 560.493L397.295 574.332ZM424.981 546.653L391.757 513.439L405.601 499.6L438.824 532.814L424.981 546.653ZM451.282 520.359L418.059 487.144L431.902 473.305L465.125 506.52L451.282 520.359ZM478.969 492.68L445.745 459.465L459.588 445.626L492.812 478.841L478.969 492.68ZM505.271 466.385L472.047 433.171L485.89 419.332L519.114 452.546L505.271 466.385ZM532.957 438.706L499.733 405.492L513.576 391.653L546.8 424.867L532.957 438.706ZM559.258 412.412L526.035 379.197L539.878 365.358L573.101 398.573L559.258 412.412ZM586.945 384.733L553.721 351.519L567.564 337.679L600.788 370.894L586.945 384.733ZM613.246 358.438L580.023 325.223L593.866 311.384L627.089 344.599L613.246 358.438ZM640.932 330.76L607.709 297.545L621.552 283.705L654.775 316.92L640.932 330.76ZM667.234 304.464L634.011 271.25L647.854 257.411L681.077 290.625L667.234 304.464ZM694.92 276.786L661.697 243.572L675.54 229.732L708.763 262.946L694.92 276.786Z"
                                fill="#9D1A1A" />
                            <path
                                d="M703.226 250.494L696.304 243.574L705.995 233.886L689.383 217.279L712.916 193.752L735.065 217.279L719.838 233.886L728.143 243.574L721.222 250.494L712.916 240.806L703.226 250.494Z"
                                fill="#9D1A1A" />
                            <path
                                d="M1161.43 708.574L1147.59 694.734L1180.81 661.521L1194.65 675.36L1161.43 708.574ZM1135.13 682.28L1121.29 668.44L1154.51 635.225L1168.35 649.065L1135.13 682.28ZM1107.44 654.601L1093.6 640.761L1126.82 607.547L1140.67 621.386L1107.44 654.601ZM1081.14 628.306L1067.3 614.466L1100.52 581.252L1114.37 595.091L1081.14 628.306ZM1053.46 600.627L1039.61 586.788L1072.84 553.573L1086.68 567.412L1053.46 600.627ZM1027.15 574.332L1013.31 560.493L1046.53 527.279L1060.38 541.118L1027.15 574.332ZM999.467 546.653L985.624 532.814L1018.85 499.6L1032.69 513.439L999.467 546.653ZM973.166 520.359L959.323 506.52L992.546 473.305L1006.39 487.144L973.166 520.359ZM945.48 492.68L931.637 478.841L964.86 445.626L978.703 459.465L945.48 492.68ZM919.178 466.385L905.335 452.546L938.558 419.332L952.401 433.171L919.178 466.385ZM891.492 438.706L877.649 424.867L910.872 391.653L924.715 405.492L891.492 438.706ZM865.19 412.412L851.347 398.573L884.57 365.358L898.413 379.197L865.19 412.412ZM837.504 384.733L823.661 370.894L856.884 337.679L870.727 351.519L837.504 384.733ZM811.202 358.438L797.359 344.599L830.583 311.384L844.426 325.223L811.202 358.438ZM783.516 330.76L769.673 316.92L802.896 283.705L816.74 297.545L783.516 330.76ZM757.214 304.464L743.371 290.625L776.594 257.411L790.437 271.25L757.214 304.464ZM729.528 276.786L715.685 262.946L748.908 229.732L762.751 243.572L729.528 276.786Z"
                                fill="#9D1A1A" />
                            <path
                                d="M748.908 1194.34L715.685 1161.12L729.528 1147.28L762.751 1180.5L748.908 1194.34ZM776.594 1168.04L743.371 1134.83L757.214 1120.99L790.437 1154.2L776.594 1168.04ZM802.896 1140.36L769.673 1107.15L783.516 1093.31L816.74 1126.52L802.896 1140.36ZM830.583 1114.07L797.359 1080.85L811.202 1067.01L844.426 1100.23L830.583 1114.07ZM856.884 1086.39L823.661 1053.17L837.504 1039.34L870.727 1072.55L856.884 1086.39ZM884.57 1060.09L851.347 1026.88L865.19 1013.04L898.413 1046.26L884.57 1060.09ZM910.872 1032.42L877.649 999.201L891.492 985.362L924.715 1018.58L910.872 1032.42ZM938.558 1006.12L905.335 972.907L919.178 959.067L952.401 992.281L938.558 1006.12ZM964.86 978.442L931.637 945.228L945.48 931.389L978.703 964.603L964.86 978.442ZM992.546 952.148L959.323 918.933L973.166 905.093L1006.39 938.308L992.546 952.148ZM1018.85 924.469L985.624 891.254L999.467 877.415L1032.69 910.63L1018.85 924.469ZM1046.53 898.174L1013.31 864.959L1027.15 851.12L1060.38 884.334L1046.53 898.174ZM1072.84 870.495L1039.61 837.28L1053.46 823.441L1086.68 856.656L1072.84 870.495ZM1100.52 844.2L1067.3 810.986L1081.14 797.147L1114.37 830.361L1100.52 844.2ZM1126.82 816.521L1093.6 783.307L1107.44 769.468L1140.67 802.682L1126.82 816.521ZM1154.51 790.227L1121.29 757.012L1135.13 743.173L1168.35 776.388L1154.51 790.227ZM1180.81 762.548L1147.59 729.333L1161.43 715.494L1194.65 748.709L1180.81 762.548Z"
                                fill="#9D1A1A" />
                            <path d="M712.177 1018.73L1018.55 712.438L712.177 406.142L405.8 712.438L712.177 1018.73Z"
                                fill="#9D1A1A" />
                        </g>
                    </svg>
                </div>


            </main>
        </>

    )

}